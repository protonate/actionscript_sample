package{	import flash.net.registerClassAlias;	import VideoPackage;	import flash.display.Sprite;	import flash.net.LocalConnection;	import flash.text.TextField;	import flash.display.Bitmap;	import flash.display.BitmapData;	import flash.utils.ByteArray;	import flash.display.Loader;	import com.adobe.images.JPGEncoder;	import flash.events.Event;	import com.adobe.images.JPGEncoder;		public class Camera2 extends Sprite	{		private const NAMED_CHANNEL:String = "_kidtv";		//private const QUALITY:int = 70;		private var receiver:LocalConnection = new LocalConnection();		private var loader:Loader = new Loader();		//private var jpgEncoder:JPGEncoder = new JPGEncoder();		private var image:Bitmap;		//private var jpgEncoder:JPGEncoder = new JPGEncoder(QUALITY);				public function Camera2():void		{			registerClassAlias("VideoPackage", VideoPackage);			registerClassAlias("ByteArray", ByteArray);			//registerClassAlias("flash.display.Bitmap", flash.display.Bitmap);			//registerClassAlias("BitmapData", BitmapData);			//registerClassAlias("flash.geom.Transform", flash.geom.Transform);			// trace("camera 2");			receiver.connect(NAMED_CHANNEL);			receiver.client = this;					}				public function TestConnection(_str:String, _videoPackage:VideoPackage):void		// public function TestConnection(_byteArray:ByteArray):void		{			test_txt.text = _str;			var objVideoPackage:VideoPackage = _videoPackage;			test_txt.text = objVideoPackage.test_str;			//trace(objVideoPackage.byteArray);						var byteArray:ByteArray = objVideoPackage.byteArray;			//var byteArray:ByteArray = jpgEncoder.encode(_byteArray);						test_txt.text = _str;			loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onBytesLoaded);			loader.loadBytes(byteArray);		}		private function onBytesLoaded(evt:Event):void		{			if(image != null)			{				removeChild(image);			}			image = Bitmap(evt.target.content);			addChild(image);			trace_txt.text = numChildren.toString();		}	}}